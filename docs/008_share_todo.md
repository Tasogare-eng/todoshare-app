# 008: Todo共有機能

## 概要
Todoを他のユーザーと共有し、閲覧可能にする機能の実装

## 目的
- Todoの共有による情報共有
- 進捗状況の透明化
- コラボレーションの基盤構築

## タスク

### データベース設計
- [ ] TodoShares テーブルの作成
- [ ] 共有トークンの生成ロジック
- [ ] 有効期限管理の実装
- [ ] RLSポリシーの設定

### バックエンド実装
- [ ] 共有リンク生成API（POST /api/todos/{id}/share）
- [ ] 共有設定更新API（PUT /api/shares/{token}）
- [ ] 共有取り消しAPI（DELETE /api/shares/{token}）
- [ ] 共有Todo取得API（GET /api/shares/{token}/todo）
- [ ] 共有リスト取得API（GET /api/todos/{id}/shares）
- [ ] トークン検証ミドルウェア
- [ ] 有効期限チェック処理
- [ ] アクセスログ記録

### フロントエンド実装
- [ ] 共有ボタンコンポーネント
- [ ] 共有設定モーダル
- [ ] 共有リンク生成・コピー機能
- [ ] QRコード生成（オプション）
- [ ] 有効期限設定UI
- [ ] 共有リスト管理ページ
- [ ] 共有ビューページ（閲覧専用）
- [ ] 共有状態インジケーター

### 共有設定オプション
- [ ] 有効期限（1日/1週間/1ヶ月/無期限）
- [ ] パスワード保護（オプション）
- [ ] アクセス回数制限（オプション）
- [ ] 共有範囲（リンクを知っている全員）

### セキュリティ
- [ ] トークンの暗号化
- [ ] ブルートフォース攻撃対策
- [ ] 共有リンクの無効化機能
- [ ] アクセスログの記録
- [ ] 不正アクセス検知

### UI/UX
- [ ] 共有アイコンのデザイン
- [ ] リンクコピー時のフィードバック
- [ ] 共有状態の視覚的表示
- [ ] モバイル対応共有UI
- [ ] ソーシャル共有ボタン（オプション）

### テスト
- [ ] 共有リンク生成テスト
- [ ] トークン検証テスト
- [ ] 有効期限テスト
- [ ] アクセス権限テスト
- [ ] 共有取り消しテスト

## 完了条件
- [ ] 共有リンクを生成できる
- [ ] 共有リンクからTodoを閲覧できる
- [ ] 共有を取り消せる
- [ ] 有効期限が正しく動作する
- [ ] 共有されたTodoは編集できない（閲覧のみ）

## 技術詳細
- トークン生成: UUID v4 + ハッシュ
- URL短縮: 独自実装またはサービス利用
- QRコード: qrcode.js

## 推定工数
2日

## 依存関係
- 003_todo_crud.mdが完了していること

## 備考
- 共有されたTodoは閲覧のみ（編集不可）
- パスワード保護はMVP後に検討
- 共有統計機能はMVP後に追加