# 007: 繰り返しタスク機能

## 概要
定期的に繰り返すタスクの自動生成機能を実装

## 目的
- 定期タスクの自動化
- ルーチンワークの管理効率化
- タスク作成の手間削減

## タスク

### データベース設計
- [ ] RecurringPatternsテーブルの作成
- [ ] Todosテーブルにrecurring_pattern_id追加
- [ ] RecurringTasksログテーブルの作成

### バックエンド実装
- [ ] RecurringPatternモデルの作成
- [ ] 繰り返しパターンの定義（daily, weekly, monthly）
- [ ] 繰り返しタスク作成API（POST /api/todos/recurring）
- [ ] 繰り返しパターン更新API（PUT /api/todos/{id}/recurring）
- [ ] 繰り返し停止API（DELETE /api/todos/{id}/recurring）
- [ ] 次回タスク自動生成ロジック
- [ ] バッチ処理（スケジューラー）の実装
- [ ] 繰り返し終了条件の処理

### フロントエンド実装
- [ ] 繰り返し設定コンポーネント
- [ ] 繰り返しパターン選択（毎日/毎週/毎月）
- [ ] 曜日選択（週次の場合）
- [ ] 日付選択（月次の場合）
- [ ] 終了条件設定（回数/終了日）
- [ ] 繰り返しアイコン表示
- [ ] 繰り返しタスク一覧表示
- [ ] 繰り返し設定の編集モーダル

### 繰り返しパターン
- [ ] 毎日（指定時刻）
- [ ] 平日のみ
- [ ] 週末のみ
- [ ] 毎週特定曜日（複数選択可）
- [ ] 毎月特定日
- [ ] 毎月最終日
- [ ] 毎月第N曜日
- [ ] カスタム間隔（N日ごと）

### ビジネスロジック
- [ ] 完了時に次回タスクを自動生成
- [ ] スキップ機能（今回はスキップ）
- [ ] 一時停止/再開機能
- [ ] 繰り返し履歴の表示
- [ ] 繰り返しタスクの一括編集

### バリデーション
- [ ] 繰り返しパターンの整合性チェック
- [ ] 終了条件の妙当性チェック
- [ ] 過去日付への繰り返し設定防止

### テスト
- [ ] 繰り返しパターン生成テスト
- [ ] 自動生成ロジックテスト
- [ ] 終了条件テスト
- [ ] スキップ・停止機能テスト

## 完了条件
- [ ] 繰り返しタスクを作成できる
- [ ] 指定したパターンでタスクが自動生成される
- [ ] 繰り返しを停止・再開できる
- [ ] 終了条件が正しく動作する
- [ ] 繰り返しタスクが視覚的に区別できる

## 技術詳細
- スケジューラー: Celery（Python）またはCron
- 日付計算: python-dateutil
- タイムゾーン処理: pytz

## 推定工数
3日

## 依存関係
- 003_todo_crud.mdが完了していること
- 005_priority_due_date.mdが完了していること

## 備考
- MVPでは基本的なパターンのみ実装
- 複雑なパターンはMVP後に追加
- タイムゾーン対応に注意